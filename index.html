<html xmlns="http://www.w3.org/1999/html">
<head>
    <link href='http://fonts.googleapis.com/css?family=Sarina|Roboto+Condensed' rel='stylesheet' type='text/css'>
    <link href="resources/style.css" rel="stylesheet" type="text/css">

</head>

<body>
    <div id="title">
        <h1><a href="http://github.com/manuelstofer/pflock" x-bind="/user/name">Pflock</a></h1>
        <h2>Two way bindings.</h2>
    </div>


<div id="try">

    <div id="pflock">
        <p x-bind="/user/description" contenteditable></p>
        <input type="text" x-bind="value:/user/name" placeholder="Username">

        <select type="text" x-bind="value:/user/selected">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>

        <input type="checkbox" x-bind="value:/user/checked">

        <ul x-each="/user/list">
            <li x-bind="/user/list/x" contenteditable></li>
        </ul>

    </div>


    <div>
        <h3>JSON</h3>
        <textarea id="data-edit"></textarea>
    </div>

</div>

<script src="test/jquery.js"></script>
<script src="build/build.js"></script>
<script>
    var pflock = require('pflock'),
        dataElement = document.getElementById('data-edit'),
        bindings = pflock(document.body, {
            user: {
                name:           'Pflock',
                description:    'Please try to edit some input fields, this text or the JSON structure below',
                checked:        true,
                selected:       '3',
                list: [
                    'It handles',
                    'your arrays too'
                ]
            }
        });

    function writeJSON () {
        dataElement.value = JSON.stringify(bindings.data);
    }

    bindings.on('changed', function () {
        writeJSON();
    });

    dataElement.addEventListener('keyup', function () {
        bindings.toDocument(JSON.parse(this.value));
    });

    writeJSON();

</script>
</body>
</html>
